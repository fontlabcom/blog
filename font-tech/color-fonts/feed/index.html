<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	
	xmlns:georss="http://www.georss.org/georss"
	xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
	>

<channel>
	<title>Color Fonts - FontLab Blog</title>
	<atom:link href="https://fontlabcom.github.io/blog//font-tech/color-fonts/feed/" rel="self" type="application/rss+xml" />
	<link>https://fontlabcom.github.io/blog//</link>
	<description>News from FontLab. For better fonts.</description>
	<lastBuildDate>Wed, 25 Feb 2015 03:09:00 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.8</generator>
<site xmlns="com-wordpress:feed-additions:1">58147272</site>	<item>
		<title>How to Create Multi-Color Fonts with FontLab Products</title>
		<link>https://fontlabcom.github.io/blog//font-tech/color-fonts/create-multi-color-fonts-fontlab-products/</link>
		
		<dc:creator><![CDATA[Thomas Phinney]]></dc:creator>
		<pubDate>Thu, 26 Jun 2014 14:50:36 +0000</pubDate>
				<category><![CDATA[Color Fonts]]></category>
		<category><![CDATA[TransType]]></category>
		<category><![CDATA[Webinars]]></category>
		<category><![CDATA[Adam Twardoch]]></category>
		<category><![CDATA[color fonts]]></category>
		<category><![CDATA[COLR]]></category>
		<category><![CDATA[CPAL]]></category>
		<category><![CDATA[DIN]]></category>
		<category><![CDATA[OpenType]]></category>
		<category><![CDATA[PS]]></category>
		<category><![CDATA[sbix]]></category>
		<category><![CDATA[SVG]]></category>
		<category><![CDATA[WA]]></category>
		<guid isPermaLink="false">http://fontlabcom.github.io/blog//?p=796</guid>

					<description><![CDATA[<p>Multi-color fonts are still bleeding edge technology, so no one format is universally (or even widely) supported. But they do work today in a number of places, especially if you can make a font that supports several of the competing would-be standards! This YouTube video by our own Adam Twardoch shows how to create multi-color [&#8230;]</p>
<p><a rel="nofollow" href="https://fontlabcom.github.io/blog//font-tech/color-fonts/create-multi-color-fonts-fontlab-products/">How to Create Multi-Color Fonts with FontLab Products</a> by <a rel="nofollow" href="https://fontlabcom.github.io/blog//author/thomaswphn846554/">Thomas Phinney</a> from <a rel="nofollow" href="https://fontlabcom.github.io/blog//">FontLab Blog</a>.</p>
<hr style="border-top:black solid 1px" /><a href="https://fontlabcom.github.io/blog//font-tech/color-fonts/create-multi-color-fonts-fontlab-products/">How to Create Multi-Color Fonts with FontLab Products</a> was first posted on June 26, 2014 at 2:50 pm.<br />]]></description>
										<content:encoded><![CDATA[<p class="intro para">Multi-color fonts are still bleeding edge technology, so no one format is universally (or even widely) supported. But they do work today in a number of places, especially if you can make a font that supports several of the competing would-be standards! This <a href="https://www.youtube.com/watch?v=Yit1ZpClwAk">YouTube video</a> by our own Adam Twardoch shows how to create multi-color fonts across multiple color formats, with existing FontLab apps.</p>
<p class="para">Currently we support:</p>
<ul>
<li>Microsoft OpenType COLR/CPAL fonts</li>
<li>Adobe/Mozilla (Firefox) OpenType SVG</li>
<li>Apple sbix</li>
</ul>
<p><a rel="nofollow" href="https://fontlabcom.github.io/blog//font-tech/color-fonts/create-multi-color-fonts-fontlab-products/">How to Create Multi-Color Fonts with FontLab Products</a> by <a rel="nofollow" href="https://fontlabcom.github.io/blog//author/thomaswphn846554/">Thomas Phinney</a> from <a rel="nofollow" href="https://fontlabcom.github.io/blog//">FontLab Blog</a>.</p>
<hr style="border-top:black solid 1px" /><a href="https://fontlabcom.github.io/blog//font-tech/color-fonts/create-multi-color-fonts-fontlab-products/">How to Create Multi-Color Fonts with FontLab Products</a> was first posted on June 26, 2014 at 2:50 pm.<br />]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">796</post-id>	</item>
		<item>
		<title>Color fonts. Overview of the proposals for color extensions of the OpenType font format.</title>
		<link>https://fontlabcom.github.io/blog//font-tech/color-fonts/color-font-format-proposals/</link>
		
		<dc:creator><![CDATA[Adam Twardoch]]></dc:creator>
		<pubDate>Thu, 19 Sep 2013 05:29:38 +0000</pubDate>
				<category><![CDATA[Color Fonts]]></category>
		<category><![CDATA[ADD]]></category>
		<category><![CDATA[BASE]]></category>
		<category><![CDATA[BitFonter]]></category>
		<category><![CDATA[CBDT]]></category>
		<category><![CDATA[CBLC]]></category>
		<category><![CDATA[CDAT]]></category>
		<category><![CDATA[CFF]]></category>
		<category><![CDATA[chromatic fonts]]></category>
		<category><![CDATA[color fonts]]></category>
		<category><![CDATA[COLR]]></category>
		<category><![CDATA[CPAL]]></category>
		<category><![CDATA[DIN]]></category>
		<category><![CDATA[EBDT]]></category>
		<category><![CDATA[EST]]></category>
		<category><![CDATA[FIRST]]></category>
		<category><![CDATA[FL]]></category>
		<category><![CDATA[font editor]]></category>
		<category><![CDATA[font technology]]></category>
		<category><![CDATA[Fontlab Ltd]]></category>
		<category><![CDATA[FontLab Pad]]></category>
		<category><![CDATA[Fonttools]]></category>
		<category><![CDATA[GPOS]]></category>
		<category><![CDATA[GSUB]]></category>
		<category><![CDATA[hinting]]></category>
		<category><![CDATA[IE]]></category>
		<category><![CDATA[Indic]]></category>
		<category><![CDATA[metrics]]></category>
		<category><![CDATA[multicolor]]></category>
		<category><![CDATA[Multiple Master]]></category>
		<category><![CDATA[new]]></category>
		<category><![CDATA[news]]></category>
		<category><![CDATA[NOTE]]></category>
		<category><![CDATA[OK]]></category>
		<category><![CDATA[OpenType]]></category>
		<category><![CDATA[OpenType Layout features]]></category>
		<category><![CDATA[outlines]]></category>
		<category><![CDATA[Photofont]]></category>
		<category><![CDATA[PostScript]]></category>
		<category><![CDATA[PS]]></category>
		<category><![CDATA[Python]]></category>
		<category><![CDATA[rendering]]></category>
		<category><![CDATA[RIT]]></category>
		<category><![CDATA[Rome]]></category>
		<category><![CDATA[sbix]]></category>
		<category><![CDATA[SECOND]]></category>
		<category><![CDATA[SFNT]]></category>
		<category><![CDATA[SID]]></category>
		<category><![CDATA[SING]]></category>
		<category><![CDATA[SVG]]></category>
		<category><![CDATA[TransType]]></category>
		<category><![CDATA[TrueType]]></category>
		<category><![CDATA[TTX]]></category>
		<category><![CDATA[US]]></category>
		<category><![CDATA[video]]></category>
		<category><![CDATA[WA]]></category>
		<category><![CDATA[website]]></category>
		<category><![CDATA[WIN]]></category>
		<category><![CDATA[Windows]]></category>
		<guid isPermaLink="false">http://fontlabcom.github.io/blog//?p=40</guid>

					<description><![CDATA[<p>Although Fontlab Ltd. debuted the Photofont technology some 8 years ago, the typographic community did not show much interest for multi-color fonts or typography. In 2013, it changed. Actually, this started a few years ago with Apple introducing the color emoji font into iOS, and then Mac OS X 10.7. Now, all major industry players [&#8230;]</p>
<p><a rel="nofollow" href="https://fontlabcom.github.io/blog//font-tech/color-fonts/color-font-format-proposals/">Color fonts. Overview of the proposals for color extensions of the OpenType font format.</a> by <a rel="nofollow" href="https://fontlabcom.github.io/blog//author/adamtwr39258/">Adam Twardoch</a> from <a rel="nofollow" href="https://fontlabcom.github.io/blog//">FontLab Blog</a>.</p>
<hr style="border-top:black solid 1px" /><a href="https://fontlabcom.github.io/blog//font-tech/color-fonts/color-font-format-proposals/">Color fonts. Overview of the proposals for color extensions of the OpenType font format.</a> was first posted on September 19, 2013 at 5:29 am.<br />]]></description>
										<content:encoded><![CDATA[<p class="intro para">Although Fontlab Ltd. debuted the Photofont technology some 8 years ago, the typographic community did not show much interest for multi-color fonts or typography. In 2013, it changed. Actually, this started a few years ago with Apple introducing the color emoji font into iOS, and then Mac OS X 10.7. Now, all major industry players (Apple, Adobe, Mozilla, Google and Microsoft) have proposed their formats, which aim to extend the OpenType font format by the ability of including color glyph information. The proposals differ in many aspects. Below is a discussion of the proposals along with some personal comments.</p>
<p class="para"><em>This article is very technical. No completeness or correctness of the information presented below, and all views are personal.</em></p>
<p class="para"></p><div class="arve" data-mode="normal" data-provider="iframe" id="arve-iframe-httpswwwyoutubecomembedyit1zpclwak612029c26617d481244519" style="max-width:900px;" itemscope itemtype="http://schema.org/VideoObject">
<span class="arve-inner">
<span class="arve-embed arve-embed--has-aspect-ratio arve-embed--16by9">
<meta itemprop="embedURL" content="https://www.youtube.com/embed/Yit1ZpClwAk">
<iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen class="arve-iframe fitvidsignore" data-arve="arve-iframe-httpswwwyoutubecomembedyit1zpclwak612029c26617d481244519" data-src-no-ap="https://www.youtube.com/embed/Yit1ZpClwAk" frameborder="0" height="506.25" sandbox="allow-scripts allow-same-origin allow-presentation allow-popups allow-popups-to-escape-sandbox" scrolling="no" src="https://www.youtube.com/embed/Yit1ZpClwAk" width="900"></iframe>

</span>

</span>

</div>
<br>
The video tutorial by Adam Twardoch accompanies this article by providing a more practical take on color font creation issues. 
<p class="para"><span id="more-40"></span></p>
<div><span class="expandall">Show</span> | <span class="collapseall">Hide</span> all in-depth fragments of the text intended for advanced readers</div>
<h2>Concepts</h2>
<p class="para">There are several conceptual approaches for “color fonts” that can be considered, in increasing order of complexity:</p>
<ul>
<li>a] per-PPM bitmap strike definition, without any scaling</li>
<li>b] scalable bitmap glyphs with multiple “master PPM sizes”</li>
<li>c] one scalable bitmap glyph definition across all PPMs</li>
<li>d] layered outline glyphs, one solid fill per layer</li>
<li>e] static outline glyphs with complex fills and optional bitmap content</li>
<li>f] animated variant of e]</li>
</ul>
<h2>Approaches</h2>
<p class="para">We have now four distinct approaches from the major vendors, in increasing order of complexity:</p>
<ul>
<li>GOO: Google <code>CBDT</code>/<code>CBLC</code>&nbsp;tables — a] or b], unclear</li>
<li>APP: Apple <code>sbix</code> table — b] concept</li>
<li>MIC: Microsoft <code>COLR</code>/<code>CPAL</code> tables — d] concept</li>
<li>SVG: Joint Adobe and Mozilla <code>SVG</code> &nbsp;table — e] concept, possibly expandable to f]</li>
</ul>
<h2>Considerations</h2>
<p class="para">There are also several considerations, or aspects, which each implementation needs to address.</p>
<ul>
<li><strong>Co-existence</strong>: regardless of the possible size inflation, whether several approach can co-exist within the same <code>SFNT</code> font file. This includes questions such as precedence (what should happen if a consuming platform “understands” multiple approaches) or structure sharing (whether the same structure, e.g. the PNG image data or a color palette, can be shared by multiple approaches). In particular, the question of co-existence of the new structures with old ones (<code>glyf</code> or <code>CFF</code> &nbsp;table) is important.</li>
<li><strong>External modification</strong>: especially with the outline approaches, whether the colors specified within the <code>SFNT</code> font file can somehow be manipulated/modified externally by the consuming platforms. This also includes more specific questions such as, in case of the SVG-based approaches, controlling animation or, if the consuming platform is a web browser, interaction with the document’s DOM.</li>
<li><strong>Fallback/degradation</strong>: related to co-existence, how the color data should be represented in environments that only support grayscale or even monochrome data. Adobe’s Leonard Rosenthol has raised a number of fundamental issues on this in context of the SVG discussion. The discussion makes, I hope, an interesting read: the “Glyph bbox concerns” thread, [1] and [2].</li>
<li>[1]&nbsp; <a href="http://lists.w3.org/Archives/Public/public-svgopentype/2012Jun/thread.html" rel="nofollow">http://lists.w3.org/Archives/Public/public-svgopentype/2012Jun/thread.html</a></li>
<li>[2]&nbsp; <a href="http://lists.w3.org/Archives/Public/public-svgopentype/2012Aug/thread.html" rel="nofollow">http://lists.w3.org/Archives/Public/public-svgopentype/2012Aug/thread.html</a></li>
</ul>
<h2>Detailed discussion of approaches</h2>
<h3>GOO: Google <code>CBDT</code>/<code>CBLC</code> tables</h3>
<p class="para">Bitmap-based (PNG) glyphs, either as per-PPM bitmap strike definition, without any scaling, or as scalable bitmap glyphs with multiple “master PPM sizes” — this is unclear (see below for details).</p>
<p class="para">Announced in May 2013 on the Google blog [GOO1], this is an approach which specifies two tables (<code>CBDT</code>/<code>CBLC</code>, [GOO2]), which in turn extend the existing OpenType <code>EBDT</code>/<code>EBLC</code> tables [GOO3], [GOO4] by adding the ability to include uncompressed color images or PNG images. Those, in turn, are extended version of Apple’s original <code>bdat</code>/<code>bloc</code> tables which have a long history.</p>
<p class="para">Google hosts a “Color Emoji” project dedicated to this [GOO5], have created a Python tool which embeds PNGs into that table [GOO6] and have provided sample fonts. FreeType 2.5 now also includes support for this [GOO7], added on May 29th.</p>
<span class="collapseomatic " id="id3784" title="Show details">Show details</span><span id="swap-id3784" alt style="display:none;">Hide details</span><div id="target-id3784" class="collapseomatic_content ">
<p class="para"><em>Co-existence:</em>&nbsp;The GOO proposal states: “It is recommended that such fonts include no <code>glyf</code> table, and as such be bitmap-only fonts. In the presence of color and non-color strikes in the same font, it is currently unspecified which bitmap a conformant client will choose for rendering.”. While this does not directly invalidate co-existence, it raises a valid question (for co-existence in general, and for precedence in particular). However, in Microsoft’s and Apple’s traditional implementations of the TrueType rasterizer (before ClearType), the bdat/bloc and <code>EBDT</code>/<code>EBLC</code> tables worked so that if a bitmap strike was available for a given PPM, it was used, otherwise the outline glyph was rendered from the <code>glyf</code> table (even for the same glyph but different PPM). I definitely think that all consuming platforms which support the GOO approach should adopt the aforementioned principle. This is especially crucial when it comes to co-existence between the GOO proposal and the MIC proposal. If the GOO approach behaves as I described, then chances are that one font could include the <code>CBDT</code>, <code>CBLC</code>, <code>COLR</code>, <code>CPAL</code> and glyf tables, and the consuming platform could easily choose whether to use the GOO approach first, and then (for different PPM sizes or glyphs which are not supported by the GOO tables) use the MIC approach (or just the plain <code>glyf</code> table).</p>
<p class="para"><em>External modification:</em>&nbsp;While some people have generally voiced their desire to be able to manipulate colors that are embedded inside of a font file externally, I think in case of PNG-based glyphs, this should be, if at all, a post-processing step (after the glyph images have been retrieved from the scaler).</p>
<p class="para"><em>Fallback/degradation:</em>&nbsp;the GOO spec includes provisions as to how the color bitmap data should be transformed into grayscale bitmap data.</p>
<p class="para"><em>Unclear:</em>&nbsp;The OpenType spec also includes the <code>EBSC</code> table [GOO8] which defines which per-PPM strikes should be used for which PPM ranges when they need to be scaled. Without <code>EBSC</code>, it is assumed that the <code>EBDT</code>/<code>EBLC</code> strikes are only rendered for the specified PPM. The GOO proposal makes no mention of how scaling should be implemented, or whether a scaler should rely on the presence of the <code>EBSC</code> table. I <strong>strongly</strong> think that, should the GOO proposal aim at wider adoption, it should strictly follow the principle laid out in the OpenType spec: if no <code>EBSC</code> table is present, strikes should be rendered only at given PPMs. For scaling, it should refer to the <code>EBSC</code> table. It’s also unclear to me what FreeType 2.5 is doing at this point, and whether support for <code>EBSC</code> is planned.</p>
<ul>
<li>[GOO1]&nbsp; <a href="http://google-opensource.blogspot.de/2013/05/open-standard-color-font-fun-for.html" rel="nofollow">http://google-opensource.blogspot.de/2013/05/open-standard-color-font-fun-for.html</a></li>
<li>[GOO2]&nbsp; <a href="https://color-emoji.googlecode.com/git/specification/v1.html" rel="nofollow">https://color-emoji.googlecode.com/git/specification/v1.html</a></li>
<li>[GOO3]&nbsp; <a href="http://www.microsoft.com/typography/otspec/ebdt.htm" rel="nofollow">http://www.microsoft.com/typography/otspec/ebdt.htm</a></li>
<li>[GOO4]&nbsp; <a href="http://www.microsoft.com/typography/otspec/eblc.htm" rel="nofollow">http://www.microsoft.com/typography/otspec/eblc.htm</a></li>
<li>[GOO5]&nbsp; <a href="https://code.google.com/p/color-emoji/" rel="nofollow">https://code.google.com/p/color-emoji/</a></li>
<li>[GOO6]&nbsp; <a href="https://code.google.com/p/color-emoji/source/browse/" rel="nofollow">https://code.google.com/p/color-emoji/source/browse/</a></li>
<li>[GOO7]&nbsp; <a href="http://git.savannah.gnu.org/cgit/freetype/freetype2.git/" rel="nofollow">http://git.savannah.gnu.org/cgit/freetype/freetype2.git/</a></li>
<li>[GOO8]&nbsp; <a href="https://www.microsoft.com/typography/otspec/ebsc.htm" rel="nofollow">https://www.microsoft.com/typography/otspec/ebsc.htm</a></li>
</ul>
<p class="para"></p></div>
<h3>APP: Apple <code>sbix</code> table</h3>
<p class="para">In the current implementation: bitmap-based (PNG) glyphs, as scalable bitmap glyphs with multiple “master strikes” per PPM. The <code>sbix</code> spec has provisions to hold other types of glyph definitions, such as TIFF, SVG, PDF or even movie clips, but this is not very clearly specified nor implemented.</p>
<p class="para">Apple’s is the first implementation that has been officially deployed. It was introduced to iOS 4 and also runs in CoreText applications Mac OS X 10.7 and newer. It does not run on ATSUI applications such as Pages 09 or Keynote 09, but does work in CoreText applications such as TextEdit or Safari. Support for <code>sbix</code> table with PNG glyph has also been added to FreeType.</p>
<p class="para">The spec of the table has not been officially published by Apple, but has been shared with interested developers. The implementation hosts PNG data inside the <code>sbix</code> table, with multiple PPM “master bitmaps” possible per glyph. The scaler is responsible for choosing the most appropriate PPM size and scale it to other PPM sizes as needed.</p>
<p class="para">It seems that per “master strike”, both the PPM and DPI information can be provided. For the metrics, the implementation relies on the bounding boxes stored in the <code>glyf</code> table. It seems that, very unfortunately, the Apple implementation renders the contents of a <code>glyf</code> table glyph, and the on top it renders its associated bitmap — so if bitmaps are available in the <code>sbix</code> table for a particular glyph ID, the corresponding <code>glyf</code> glyph ID slot has to be empty.</p>
<p class="para">Mac OS X 10.8 includes one font with the <code>sbix</code> table: Apple Color Emoji, while iOS 6 includes the former along with Apple Color Emoji@2 (the latter hosting the glyphs in double DPI resolution, it appears).</p>
<p class="para">A reverse-engineered incomplete and faulty spec has been published [APP1] and [APP2], and a patch for fontTools/TTX has been published [APP3]. Those do not seem to work correctly, though. However, Fontlab Ltd. has implemented its own <code>sbix</code> reading and writing, which seems to work correctly. Fontlab Ltd. also has its own <code>sbix</code> renderer, and I have successfully built Latin-script color fonts with the <code>sbix</code> table and OpenType Layout features such as <code>calt</code>, and that font works as expected in Mac OS X 10.7 and 10.8 (hooray!).</p>
<span class="collapseomatic " id="id3072" title="Show details">Show details</span><span id="swap-id3072" alt style="display:none;">Hide details</span><div id="target-id3072" class="collapseomatic_content ">
<p class="para"><em>Co-existence:</em>&nbsp;The fact that the <code>sbix</code> implementation in Apple OSes seems to require that the <code>glyf</code> glyphs are blank raises a big co-existence concern.</p>
<p class="para">In particular, it seems that this approach could not co-exist with the MIC approach, which is a pity. I see that as a weakness of the APP approach.</p>
<p class="para">As for the co-existence of the APP and GOO approaches, it seems somewhat unclear to me. The APP approach requires both <code>sbix</code> and <code>glyf</code> to be present, while currently, the GOO approach discourages the presence of <code>glyf</code>. I see it as a weakness of both approaches (more strongly of the GOO approach). Also, there is the question of data duplication. Theoretically, I imagine that a smart mechanism (akin to <code>TTC</code>) could allow for some data sharing, wherein both the <code>sbix</code> table and the <code>CBLC</code> table referred to the same PNG chunks. But I’m not sure if offsets that go beyond defined table boundaries are permitted in the OT spec (I don’t think they are).</p>
<p class="para"><em>External modification:</em>&nbsp;While some people have generally voiced their desire to be able to manipulate colors that are embedded inside of a font file externally, I think in case of PNG-based glyphs, this should be, if at all, a post-processing step (after the glyph images have been retrieved from the scaler).</p>
<p class="para"><em>Fallback/degradation:</em>&nbsp;the APP implementation does not have any clear provisions for fallback/degradation. A renderer could fall back to grayscale or monochrome (dithered) versions of the <code>sbix</code> PNG glyphs, but it would be desirable if it could also fall back to “proper” <code>glyf</code> outline glyphs. However, the fact that the APP implementation relies on <strong>empty</strong>&nbsp;<code>glyf</code>&nbsp;glyphs invalidates that.</p>
<p class="para"><em>Unclear:</em>&nbsp;It’s not currently clear how the PPM+DPI “master strikes” should be chosen and scaled, but my assumption is that the APP approach explicitly assumes that the <code>sbix</code> glyphs are scalable, without the need for an additional <code>EBSC</code> table. This may be disputable. Also, it’s not entirely clear to me how a renderer should make use of the PPM and DPI information, though by itself it seems rather straightforward.</p>
<ul>
<li>[APP1]&nbsp; <a href="http://typophile.com/node/96671#comment-524375" rel="nofollow">http://typophile.com/node/96671#comment-524375</a></li>
<li>[APP2]&nbsp; <a href="http://kanji-database.sourceforge.net/fonts/opentype.html" rel="nofollow">http://kanji-database.sourceforge.net/fonts/opentype.html</a></li>
<li>[APP3]&nbsp; <a href="https://gist.github.com/jjgod/5478229" rel="nofollow">https://gist.github.com/jjgod/5478229</a></li>
</ul>
<p class="para"></p></div>
<h3>MIC: Microsoft <code>COLR</code>/<code>CPAL</code> tables</h3>
<p class="para">The newest member in the family of solutions, announced by Microsoft’s Michelle Perham and Si Daniels on June 26th [MIC1], the Microsoft proposal looks quite simple and clever to me, judging from the announcement. It adds a relatively lightweight baggage of <code>COLR</code>&nbsp;and <code>CPAL</code>&nbsp;tables which results in layered outline glyphs with one solid fill per layer.</p>
<p class="para">The MIC approach is implemented in Windows 8.1, with a new Segoe UI Emoji font being included in the OS. A video from Microsoft’s Dan McLachlan talk where he presents the approach is available [MIC2] (about 9 minutes into the talk). Also, Michelle Perham made a presentation at TypeCon 2013 dedicated to the topic.</p>
<p class="para">The approach uses a base glyph (<code>glyf</code> or, presumably, also <code>CFF</code> ) which is used for non-color situations. The <code>COLR</code> table refers from this glyph into other outline glyphs (which exist within the same table), which serve as layers. Each “layer glyph” has its own z‑order and a single color references. The color references are handled has palette indices, with a separate table, <code>CPAL</code> in OpenType that resolves the RGBA colors actually used for the glyph. Therefore, both the <code>COLR</code> and the <code>CPAL</code> tables should be quite small in size, all the heavy-lifting being done by the traditional rendering methods. It was announced that Microsoft plans to publish the specs for the tables within the next few weeks.</p>
<span class="collapseomatic " id="id6628" title="Show details">Show details</span><span id="swap-id6628" alt style="display:none;">Hide details</span><div id="target-id6628" class="collapseomatic_content ">
<p class="para"><em>Co-existence:</em>&nbsp;If the GOO approach clarifies its behavior when the <code>glyf</code> table is present, then the MIC approach could co-exist easily with the GOO approach. Actually, these two approaches could cleverly echo the former co-existence of <code>glyf</code> with <code>bdat</code>/<code>bloc</code>&nbsp;(or <code>EBDT</code>/<code>EBLC</code>/<code>EBSC</code>). A consuming platform could go straight for the monochrome <code>glyf</code> glyphs, or could prioritize the MIC approach with a fallback to <code>glyf</code>, or could prioritize the GOO approach with a fallback to <code>glyf</code>, or could prioritize the GOO approach, then fall back to the MIC approach, and then finally fall back to <code>glyf</code>. I don’t see any principal conflict there.</p>
<p class="para"><em>External modification:</em>&nbsp;As Michelle wrote on the OpenType list, “Fonts can have multiple palettes, but right now the colors are defined by the font developer and the user is not able to make changes to the palettes. That’s definitely something we’d like to consider in the future and might be something that applications could expose.” At TypeCon, Greg Hitchcock clarified the envisioned roles of the palettes: first palette is used by default for “dark on light” color situations while second palette is intended for use in “light on dark” situations. Additional palettes should be selectable by the user.</p>
<p class="para"><em>Fallback/degradation:</em>&nbsp;This approach seems to be degrading nicely, and fallback implications have been discussed above.</p>
<ul>
<li>[MIC1]&nbsp; <a href="http://typophile.com/node/104174" rel="nofollow">http://typophile.com/node/104174</a></li>
<li>[MIC2]&nbsp; <a href="http://channel9.msdn.com/Events/Build/2013/3-191" rel="nofollow">http://channel9.msdn.com/Events/Build/2013/3–191</a></li>
</ul>
<p class="para"></p></div>
<h3>SVG: Joint Adobe and Mozilla <code>SVG</code> &nbsp;table</h3>
<p class="para">The “full Monty” outline+bitmap (SVG) glyphs with possible animation.</p>
<p class="para">This is a proposal formulated by Mozilla’s Edwin Flores and Cameron McCormack, with input from Robert O’Callahan and Adobe’s Sairus Patel, which has been submitted as <del datetime="2014-09-23T20:21:19+00:00">an unofficial editor’s draft</del> a Final Community Group Specification to the W3C [SVG1]. There is a reasonably well-working SVG OpenType community for this [SVG3] and a public mailing list [SVG2]. As indicated on Robert O’Callahan’s blog [SVG4], this proposal has been implemented in Firefox — it’s off by default but can be enabled by toggling <code>gfx.font_rendering.opentype_svg.enabled</code>&nbsp;in about:config. Also, a tool, written in Python, is available to create such fonts [SVG5].</p>
<p class="para">This is the by-far most complex proposal, as it puts the bar quite high for implementers (it requires a full SVG renderer, and has provisions for animated glyphs). On the other hand, its great advantage is that, once an app has access to the SVG renderer, it can delegate the rendering of the glyphs completely to the SVG library. So the app only needs to call an OpenType Layout library to perform the layout, and then call the SVG renderer for each glyph, and position the rendered bitmaps. So in fact in an SVG-compatible environment using the SVG table would be trivial.</p>
<p class="para">The SVG proposal allows for designs that cannot be achieved by the other solutions: it implements “rich color” (with gradients etc.), allows for drawing various strokes and, of course, intermixing vectors and bitmaps. So it’s potentially very very powerful.</p>
<p class="para">Sairus Patel explained to me at TypeCon that he considers the current proposed spec as “good to go”, and that’s the spec that is implemented in Firefox.</p>
<span class="collapseomatic " id="id8216" title="Show details">Show details</span><span id="swap-id8216" alt style="display:none;">Hide details</span><div id="target-id8216" class="collapseomatic_content ">
<p class="para">This approach really is an entirely different animal than all of the above. I can easily imagine that the APP, GOO and MIC approaches are all some kind of “color fonts 1.0”, while the SVG proposal is “color fonts 2.0”. There’s is an ongoing debate on the public mailing list of the W3C community, so I won’t get into a detailed discussion here (also because I don’t quite understand some of the complexities involved).</p>
<p class="para">I definitely think, though, that this approach can co-exist with all the previous ones.</p>
<p class="para">One potential co-existence benefit could be if the <code>SVG</code> &nbsp;table co-exists with the MIC <code>CPAL</code> table. The SVG glyphs could potentially make references to the color palettes specified within <code>CPAL</code>, and if — in future — some means to externally manipulate the <code>CPAL</code> palettes were implemented in consuming platforms, both the MIC approach and the SVG approach could benefit from that development.</p>
<p class="para">In the light of the MIC proposal, Sairus Patel mentioned to me that he might consider proposing some extensions to the Microsoft <code>CPAL</code> table, and then would consider dropping the color palette format proposed in the SVG spec — so that ultimately both the MIC and the SVG formats could use the <code>CPAL</code> table.</p>
<ul>
<li>[SVG1]&nbsp;&nbsp;<a href="http://www.w3.org/2013/10/SVG_in_OpenType/" rel="nofollow">http://www.w3.org/2013/10/SVG_in_OpenType/</a></li>
<li>[SVG2]&nbsp; <a href="http://www.w3.org/community/svgopentype/" rel="nofollow">http://www.w3.org/community/svgopentype/</a></li>
<li>[SVG3]&nbsp; <a href="http://lists.w3.org/Archives/Public/public-svgopentype/" rel="nofollow">http://lists.w3.org/Archives/Public/public-svgopentype/</a></li>
<li>[SVG4]&nbsp; <a href="http://robert.ocallahan.org/2013/02/svg-in-opentype-new-approach-to-svg.html" rel="nofollow">http://robert.ocallahan.org/2013/02/svg-in-opentype-new-approach-to-svg.html</a></li>
<li>[SVG5]&nbsp; <a href="https://github.com/edf825/SVG-OpenType-Utils" rel="nofollow">https://github.com/edf825/SVG-OpenType-Utils</a></li>
</ul>
<p class="para"></p></div>
<h2>Personal conclusion</h2>
<p class="para">In my view, each of the presented approaches has its advantages and disadvantages.</p>
<h3>The Proposals</h3>
<p class="para">The APP proposal is great in so far that it’s actually already implemented. However, the interaction of the <code>sbix</code> and <code>glyf</code> tables as implemented in Apple OSes has its serious drawbacks (no fallback scenario). Also, it’s unknown whether the <code>sbix</code> table would ever make its way into the official ISO OFF or OpenType specs.</p>
<p class="para">The MIC proposal only “goes color” in a limited scope — it provides a way to render multilayer glyphs with solid fills. But they’re outline glyphs, so they should scale nicely.</p>
<p class="para">The GOO and APP proposals use PNG as their vehicle, so they can have complex fills but would fail in high-resolution scenarios. FreeType already implements the APP proposal with PNG glyph definitions, and the GOO proposal — so it looks like adding support for them was quite easy.</p>
<p class="para">The GOO approach has advantages in so far that it ties into an existing infrastructure of tables, but my fear is that these existing table concepts may be abused (no reference to how scaling should happen). Also, GOO’s insistence over non-presence of the <code>glyf</code> table is very limiting, and not understandable: they say they want their extensions to go into the official <code>EBDT</code>/<code>EBLC</code> tables, but those tables make no such requirement.</p>
<p class="para">In principle, the MIC and GOO approaches could be easily “married together”: the MIC proposal would be useful for multilayer glyphs with solid fills, the GOO approach for glyphs which require more refined bitmap treatment, and fallback scenarios could be defined rather well.</p>
<p class="para">The SVG approach is very welcome, and, as I said, a kind of “2.0” thing. I believe the discussion on them should continue, even if implementations of those could be confined to only the web browser context. Also, Firefox actually already implements the SVG approach, which is very good news.</p>
<h3>Color Palettes</h3>
<p class="para">As for&nbsp;<strong>color palettes</strong>, I consider its addition to font formats (whether through a unified and further developed <code>CPAL</code> table or through several separate mechanisms) as&nbsp;<strong>third element of typographic user control</strong>.</p>
<p class="para">Historically, the first user control mechanism was just the <code>cmap</code> table: the user’s control over a font was limited to just entering a string of Unicodes, and picking the font size —&nbsp;and the rest would be done by the font.</p>
<p class="para">The second mechanism was the addition of the <code>GSUB</code>/<code>GPOS</code> tables: user’s control was extended by the ability to specify OpenType Layout features that should be applied to the text.</p>
<p class="para">And now, we’re extending the user’s control by adding ability to specify multiple colors through the font’s color palette.</p>
<h3>Relation to Existing Solutions</h3>
<p class="para">When comparing the&nbsp;<strong>outline color font format</strong>&nbsp;proposals, I would use the following analogy:</p>
<ul>
<li>First personal computers had&nbsp;<strong>black-and-white</strong>&nbsp;monitors so they only could display one color. That’s like the current monochrome font formats.</li>
<li>Then, computers could display&nbsp;<strong>16 colors</strong>&nbsp;at the time, and later even 256 colors. The GIF graphics format dominated the early days of the web, and it supported up to 256 colors. So that was the “<strong>flat color</strong>” implementation, and that’s exactly what the MIC proposal is.</li>
<li>Finally, computers gained the possibility to display over&nbsp;<strong>16 million colors</strong>, and graphic formats such as JPG and PNG were developed to support this. That allowed for “<strong>rich color</strong>” applications, and this is analogous to the SVG proposal.</li>
</ul>
<p class="para">Before color fonts,&nbsp;<strong>OpenType</strong>&nbsp;had three separate possible glyph sources:</p>
<ul>
<li><strong>embedded bitmaps</strong>, which could be monochrome or grayscale, in the <code>bdat</code>/<code>bloc</code>/<code>EBDT</code>/<code>EBLC</code>/<code>EBSC</code> tables</li>
<li><strong>TrueType outlines</strong>&nbsp;in the <code>glyf</code> table, which was a very straightforward structure that allowed little design flexibility but through its sophisticated hinting mechanism gave the designer a lot of control over the rasterizer</li>
<li><strong>PostScript outlines</strong>&nbsp;in the <code>CFF</code> &nbsp;table, which did not give that precise control over the rasterizer through hinting, but was a relatively complex structure that came “supercharged” with some features that were not fully explored to date: fractional point coordinates, the FontMatrix mechanism which allowed on-the-fly skewing, scaling or rotation, and even Multiple Master, which was dropped from the spec.</li>
</ul>
<p class="para">All three solutions “co-existed peacefully” in the monochrome font world.</p>
<p class="para">The GOO proposal plugs directly into the embedded bitmaps mechanism, but extends it with color.</p>
<p class="para">The MIC proposal extends the <code>glyf</code> table and provides a simple solution for “flat colors”, but is quite limited beyond that. Yet it allows precise hinting.</p>
<p class="para">The SVG proposal is a cousin of the <code>CFF</code> &nbsp;table: it’s technically the most complex, and requires a very smart, “active” rasterizer. It does not offer hinting but allows more complex design solutions than the other proposals.</p>
<p class="para">I hope that a similar “peaceful co-existence” can emerge for the color proposals that had existed for the monochrome solutions. Each of them has its merits and none of them is sufficient by its own.</p>
<h3>Finiteness</h3>
<p class="para">There is one more consideration that I should mention: “finiteness” of the proposals. By that I mean whether the limitations of what a given formats aims to achieve in the end is now clearly defined. This is closely related to stability of implementations, meaning: if, as a developer, I invest the time to implement a given format now, will I have to revisit it in the future?</p>
<p class="para">Superficially, an “extensible” structure is appealing. “Oh, this structure is infinitely extensible, we can add so many cool stuff to it later”. But in many cases, an infinitely extensible structure also poses risks. Software developers have limited time windows to devote to fonts and text technology. They often want to implement something and be done with it for the next years. So somewhat paradoxically, a proposal that clearly and consciously states its limits is actually attractive because it doesn’t leave open questions.</p>
<p class="para">The GOO proposal seems to be the best example of such self-limiting format. It extends the existing embedded bitmap formats by adding just two or so new subformats, and that’s it. There may be one or two open questions now (the scalability issue I discussed), but once those are answered, and developers add support for it, it’s a done deal. The GOO proposal does not leave many loose ends.</p>
<p class="para">In other words, the GOO proposal doesn’t try to cook many dishes at the same time or doesn’t try to be a “catch all solution”. Instead, it aims to do just one thing, and to do it very well. Which is, I believe, where its real beauty lies. Also — just like the older embedded bitmap formats — it can be used to host bitmap-only glyph data, without any outline fallback. This actually is quite desirable for some scenarios such as fixed-size devices — simple electronic displays (brick phones, scrolling electronic banners, diplays in car radios or other portable electronics).</p>
<p class="para">In constrast, the APP proposal limits itself very vaguely. The <code>sbix</code> table spec says that it can host a huge variety of possible glyph formats, from PNG through TIFF and JPEG, SVG and PDF to even movie clips. Attractive in principle, it also may be a bit “scary”. The current APP implementation isn’t actually <code>sbix</code>. It’s “<code>sbix</code> with PNG glyph data”. But there could be “<code>sbix</code> with SVG data” or “<code>sbix</code> with MOV clips”. This means that develpers who choose to implement “sbix as a whole” may end up struggling to support various glyph data sources, and they may never be sure whether something new wouldn’t pop up in future.</p>
<p class="para">The MIC proposal quite cleanly defines its current scope, though Greg Hitchcock has suggested during the TypeCon meeting that Microsoft may in future extend their format to support “more things”, like gradients. However, knowing Microsoft’s practice, they would most likely extend it in a transparent, backwards-compatible way (so, for example, a gradient would fall back to a solid color). At the current stage of the proposal, <code>CPAL</code> and <code>COLR</code> are nicely defined. <code>CPAL</code> may undergo some revisions, especially if (hopefully) both the <code>COLR</code> and the <code>SVG</code> &nbsp;tables make use it, i.e. if Adobe, Microsoft and Mozilla come to common terms regarding some minor <code>CPAL</code> extensions.</p>
<p class="para">Interestingly, the SVG in <code>SFNT</code> proposal, although very ambitious in terms of graphic effects you can achieve, is actually fairly clearly limited. Again, some wrinkles need to be ironed out, and animation is a big open question, but if we limit ourselves to static SVGs, the principle is very simple: the SVG in <code>SFNT</code> format only defines a container format for the data, and clearly <strong>delegates</strong> everything else to the SVG standard proper.</p>
<p class="para">This is actually a fairly stable proposal. It means that, as a developer who implements it, you’ll need to keep up with the evolution of SVG proper, but — if you do have an SVG renderer implementation — you’ll want to do it anyway. But the SVG in <code>SFNT</code> makes (more less) a promise that they won’t bother you greatly with doing big changes in future that will be font-specific. So as long as you’ve implemented the SFNT <code>SVG</code> &nbsp;table once (hopefully the revised one which shouls reuse <code>CPAL</code>), you’ll be done at the font end. Then, you’ll just need to keep up with your general SVG renderer as you normally would.</p>
<p class="para">So with SVG, if your application does not have an SVG renderer, it’s a “big step” that you’d need to do, but you’d only need to do it once. (And perhaps it would be a good idea to do it anyway, since SVG is a graphics format that may be useful is supporting regardless of fonts). But once you’ve done it, all future steps you’ll have to do will likely be very small and will “just happen”.</p>
<p class="para">In fact, I think the GOO mechanism would serve as an ideal fallback to SVG. Since SVG can contain scalable graphics which intermix vectors and bitmaps, the results can be very complex. But they could be pre-rendered and put into the <code>CBDT</code>/<code>CBLC</code> tables as well. It could be similar to how pre-rendered PNG bitmaps are (or used to be) often served by websites to older browsers which don’t support SVG. You’d lose the smooth scalability, but you would at least get the intended glyphs appearance.</p>
<h2>Support by FontLab apps</h2>
<p class="para">Fontlab Ltd. will soon be releasing a free app for Mac and Windows called&nbsp;<strong>FontLab Pad</strong>&nbsp;which will allow users on both OSes to use fonts that implement any of the above proposals (currently the APP and MIC formats are implemented but more support is being added as we speak). Also, FontLab’s&nbsp;<strong>TransType 4</strong>&nbsp;allows simple creation of MIC-compatible fonts through overlaying existing “layered fonts” and assigning each layer a color. TransType can also output APP-compatible fonts with the same contents. In combination with FontLab’s&nbsp;<strong>BitFonter 3</strong>, TransType 4 can be used to produce sophisticated full-bitmap color fonts in the APP-compatible format.</p>
<p class="para">At FontLab, we are very happy with this development and support it fully. Our upcoming font editors will support multicolor fonts natively, with layers and potentially also complex fills, so fonts in all color formats (including SVG) can be created.</p>
<p><a rel="nofollow" href="https://fontlabcom.github.io/blog//font-tech/color-fonts/color-font-format-proposals/">Color fonts. Overview of the proposals for color extensions of the OpenType font format.</a> by <a rel="nofollow" href="https://fontlabcom.github.io/blog//author/adamtwr39258/">Adam Twardoch</a> from <a rel="nofollow" href="https://fontlabcom.github.io/blog//">FontLab Blog</a>.</p>
<hr style="border-top:black solid 1px" /><a href="https://fontlabcom.github.io/blog//font-tech/color-fonts/color-font-format-proposals/">Color fonts. Overview of the proposals for color extensions of the OpenType font format.</a> was first posted on September 19, 2013 at 5:29 am.<br />]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">40</post-id>	</item>
	</channel>
</rss>

<!--
Performance optimized by W3 Total Cache. Learn more: https://www.boldgrid.com/w3-total-cache/

Object Caching 0/308 objects using redis
Page Caching using redis 
Lazy Loading (feed)
Database Caching using redis

Served from: blog.fontlab.com @ 2021-08-20 15:16:34 by W3 Total Cache
-->